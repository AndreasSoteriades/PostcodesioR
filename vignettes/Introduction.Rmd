---
title: "Introduction"
author: "Eryk Walczak"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    smart: no
    toc: true
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

PostcodesioR is an API wrapper for postcodes.io. It allows acquiring geographic information about the UK postcodes and geographic coordinates.

## Installation

```{r, message = FALSE, warning = FALSE, eval = FALSE}
if (!require("devtools")) install.packages("devtools")
devtools::install_github("erzk/PostcodesioR")
```

## Examples

### Lookup postcodes

#### Single postcode

```{r, message = FALSE, warning = FALSE}
library(PostcodesioR)
lookup_result <- postcode_lookup("EC1Y8LX")
str(lookup_result)
```

#### Multiple postcodes

```{r, eval = FALSE}
pc_list <- list(postcodes = c("PR3 0SG", "M45 6GN", "EX165BL"))
bulk_lookup_result <- bulk_postcode_lookup(pc_list)
str(bulk_lookup_result)
```


### Reverse geocoding

#### Single

```{r}
rev_geo <- reverse_geocoding(0.127, 51.507)
str(rev_geo)
```


#### Multiple

```{r, eval = FALSE}
# create a JSON object with the coordinates
geolocations_list <- structure(
 list(
 geolocations = structure(
 list(
 longitude = c(-3.15807731271522, -1.12935802905177),
 latitude = c(51.4799900627036, 50.7186356978817),
 limit = c(NA, 100L),
 radius = c(NA, 500L)),
 .Names = c("longitude", "latitude", "limit", "radius"),
 class = "data.frame",
 row.names = 1:2)),
 .Names = "geolocations")

bulk_rev_geo <- bulk_reverse_geocoding(geolocations_list)
str(bulk_rev_geo)
```


### Generate random entries

#### Postcodes

Generates a data frame with a random UK postcode and corresponding geographic information:

```{r}
# without restrictions
random_postcode()
```

The random postcode can also belong to a particular outcode:

```{r}
# restrict to an outcode
random_postcode("N1")
```

#### Places

You can also generate a random place, specified by an OSGB code, with corresponding geographic information:

```{r}
random_place()
```

### Postcode validation

This function can validate a UK postcode:

```{r}
postcode_validation("EC1Y 8LX") # actual UK postcode
```

```{r}
postcode_validation("XYZ") # incorrect UK postcode
```

### Find nearest postcode or outcode

```{r}
near_pc <- nearest_postcode("EC1Y 8LX")

#overview
near_pc$result[1]
```



## Notes

For more information about the API calls and returned data, consult the official [documentation](https://postcodes.io/docs).
